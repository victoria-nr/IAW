
<!doctype html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://victoria-nr.github.io/IAW/Unidad%201/P1_3/">
      
      
        <link rel="prev" href="../P1_2/">
      
      
        <link rel="next" href="../P1_4_tallerGitIntro/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.34">
    
    
      
        <title>P1.3. Conceder acceso a un segundo administrador - Implantación de aplicaciones web</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.35f28582.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-3NX5MD5C8H"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-3NX5MD5C8H",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-3NX5MD5C8H",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="green" data-md-color-accent="blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#conceder-acceso-a-un-segundo-administrador" class="md-skip">
          Saltar a contenido
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Cabecera">
    <a href="../.." title="Implantación de aplicaciones web" class="md-header__button md-logo" aria-label="Implantación de aplicaciones web" data-md-component="logo">
      
  <img src="../../assets/logocaminas.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Implantación de aplicaciones web
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              P1.3. Conceder acceso a un segundo administrador
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="green" data-md-color-accent="blue"  aria-label="Cambiar a modo oscuro"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Cambiar a modo oscuro" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="deep-orange"  aria-label="Cambiar a modo claro"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Cambiar a modo claro" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Búsqueda" placeholder="Búsqueda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Buscar">
        
        <button type="reset" class="md-search__icon md-icon" title="Limpiar" aria-label="Limpiar" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicializando búsqueda
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navegación" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Implantación de aplicaciones web" class="md-nav__button md-logo" aria-label="Implantación de aplicaciones web" data-md-component="logo">
      
  <img src="../../assets/logocaminas.png" alt="logo">

    </a>
    Implantación de aplicaciones web
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" checked>
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Unidad 1
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Unidad 1
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Ud1_1_introModulo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introducción al módulo
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_2" checked>
        
          
          <label class="md-nav__link" for="__nav_1_2" id="__nav_1_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Prácticas
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1_2">
            <span class="md-nav__icon md-icon"></span>
            Prácticas
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../P1_1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    P1.1. Linux Server en AWSAcademy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../P1_2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    P1.2 Windows Server en AWSAcademy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    P1.3. Conceder acceso a un segundo administrador
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    P1.3. Conceder acceso a un segundo administrador
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#instalacion-del-servidor-debian" class="md-nav__link">
    <span class="md-ellipsis">
      Instalación del servidor Debian
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#crear-un-nuevo-usuario" class="md-nav__link">
    <span class="md-ellipsis">
      Crear un nuevo usuario
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#generacion-del-par-de-claves" class="md-nav__link">
    <span class="md-ellipsis">
      Generación del par de claves.
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Generación del par de claves.">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#copia-la-clave-publica-desde-el-ordenador-local-al-servidor-debian" class="md-nav__link">
    <span class="md-ellipsis">
      Copia la clave pública desde el ordenador local al servidor Debian
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#comprobacion-de-acceso-al-servidor-con-ese-nuevo-usuario" class="md-nav__link">
    <span class="md-ellipsis">
      Comprobación de acceso al servidor con ese nuevo usuario
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../P1_4_tallerGitIntro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Taller 1: Introducción a git y GitHub
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../P1_5_tallerGitRamasUniones/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Taller 2: Git. Trabajando con ramas y uniones
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../P1_6_tallerMarkdown/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Taller 3: Introducción a Markdown
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Unidad 2
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Unidad 2
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Unidad%202/Ud2_1_Imp_ArqWeb/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2.1. Arquitecturas web
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Unidad%202/Ud2_2_Func_app_web/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2.2. Funcionamiento de una aplicación Web
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Unidad%202/Ud2_3_ArqWeb_serweb/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2.3. Implantación y administración de servidores web
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Unidad%202/Ud2_4_HTTP/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2.4. Los protocolos HTTP y HTTPS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Unidad%202/Ud2_5_Serv_web/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2.5. Servidores web: Nginx vs Apache
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6" >
        
          
          <label class="md-nav__link" for="__nav_2_6" id="__nav_2_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Prácticas
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_6">
            <span class="md-nav__icon md-icon"></span>
            Prácticas
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Unidad%202/P2_1_nginx/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Práctica 2.1 – Instalación y configuración de servidor web Nginx
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Unidad%202/P2_2_sitios_virtuales/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Práctica 2.2 – Creación de un sitio virtual
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Unidad%202/P2_3_autenticacion_nginx/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Práctica 2.3 – Autenticación en Nginx
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Unidad%202/P2_3_proxy_inv_nginx%20copy.md_mv/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Práctica 2.3 – Proxy inverso con Nginx
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Unidad%202/P2_4_HTTPS_nginx/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Practica 2.4 - Activación HTTPS en proxy inverso NGINX
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Unidad%202/P2_4_proxy_inv_nginx/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Práctica 2.4 – Proxy inverso con Nginx
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Unidad%202/P2_5_Balanceo_carga/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Práctica Voluntaria 2.5 – Balanceo de carga con proxy inverso en Nginx
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Unidad%202/P2_6_balanceo_con_ssl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Practica Voluntaria 2.6 - Proxy inverso y balanceo de carga con SSL en NGINX
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Unidad 3
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Unidad 3
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Unidad%203/Ud3_1_App_Web/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.1. Implantación de aplicaciones web PHP. La pila LAMP
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Prácticas
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Prácticas
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Unidad%203/P3_1_InstallServWebLAMP/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Práctica 1: Instalación de un servidor LAMP
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Unidad%203/P3_2_PHPMyAdmin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Práctica 2: Herramientas relacionadas con la pila LAMP
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Unidad%203/P3_3_VirtualhostingApache/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Práctica 3: VirtualHosting con Apache
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Unidad%203/P3_4_AppBookMedik/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Práctica 4: Instalación de la aplicación BookMedik
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Unidad%203/P3_5_CMSWordPress/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Práctica 5: Instalación del CMS WordPress
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="conceder-acceso-a-un-segundo-administrador">Conceder acceso a un segundo administrador</h1>
<p>En las prácticas anteriores vimos cómo crear un servidor virtual en AWS y cómo acceder a él usando las claves generadas en el propio entorno. Pero, ¿tenemos claro qué estamos haciendo exactamente? En esta práctica vamos a suponer que necesitamos conceder acceso a un segundo administrador a nuestra máquina, por ejemplo, al profesor para que evalúe nuestro trabajo. </p>
<p>Le daremos permisos de superusuario, crearemos un par de claves y le habilitaremos el acceso usando su clave privada.</p>
<h2 id="instalacion-del-servidor-debian">Instalación del servidor Debian</h2>
<p>Entra en el "Learner Lab" de AWS Academy y crea un servidor Debian con los mínimos recursos posibles. Bastará con los que te ofrezca la plataforma por defecto.</p>
<p>Puedes usar el par de claves generado en la primera práctica.</p>
<h2 id="crear-un-nuevo-usuario">Crear un nuevo usuario</h2>
<p>Una vez instalada nuestra Debian, tendremos un usuario <code>admin</code> creado automáticamente por AWS. Ese será nuestro usuario administrador.</p>
<p>Accede al servidor por SSH en modo comando con el usuario <code>admin</code>.</p>
<p>Pero supongamos que queremos que nuestro profesor pueda acceder a la máquina con permisos de administrador. Para ello le crearemos un usuario <code>profe</code> y le daremos permisos de <code>sudo</code> . Estos permisos nos permitirán que cualquier comando que ejecutemos en el terminal precedido de la palabra <code>sudo</code> se ejecute como <em>root</em>. De la misma forma, cualquier comando que ejecutemos con nuestro usuario sin <code>sudo</code>, será ejecutado con los permisos de nuestro usuario, por lo que nos protegemos de <em>liarla</em> con un comando que no toca como <em>root</em>.</p>
<p>Dicho esto, hay varias formas de proceder, veamos una sencilla. Se trata de modificar el archivo del sistema encargado de recoger estos permisos: <code>/etc/sudoers</code>. </p>
<p>Ya en nuestro servidor remoto, cambiaremos de nuestro usuario al usuario <code>admin</code> a <code>root</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>admin@ip-172-31-42-159:~$ sudo su -
</code></pre></div>
<p>Comprueba cómo el prompt se convierte en el de root:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>root@ip-172-31-42-159:~#
</code></pre></div>
<p>Ahora, puedes crear un nuevo usuario usando el comando <code>adduser nuevo-usuario</code>. Reemplaza "nuevo-usuario" con el nombre que desees darle al nuevo usuario y responde a las distintas preguntas que te va haciendo. En password dale al Intro sin escribir nada.</p>
<p>Para crear el usuario <code>profe</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>root@ip-172-31-42-159:~# adduser profe
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>Adding user `profe&#39; ...
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>Adding new group `profe&#39; (1001) ...
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>Adding new user `profe&#39; (1001) with group `profe (1001)&#39; ...
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>Creating home directory `/home/profe&#39; ...
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>Copying files from `/etc/skel&#39; ...
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>New password: 
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>Retype new password: 
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a>passwd: password updated successfully
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a>Changing the user information for profe
<a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a>Enter the new value, or press ENTER for the default
<a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a>    Full Name []: Profesor              
<a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a>    Room Number []: 
<a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a>    Work Phone []: 
<a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a>    Home Phone []: 
<a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a>    Other []: 
<a id="__codelineno-2-17" name="__codelineno-2-17" href="#__codelineno-2-17"></a>Is the information correct? [Y/n] Y
<a id="__codelineno-2-18" name="__codelineno-2-18" href="#__codelineno-2-18"></a>Adding new user `profe&#39; to supplemental / extra groups `users&#39; ...
<a id="__codelineno-2-19" name="__codelineno-2-19" href="#__codelineno-2-19"></a>Adding user `profe&#39; to group `users&#39; ...
<a id="__codelineno-2-20" name="__codelineno-2-20" href="#__codelineno-2-20"></a>root@ip-172-31-42-159:~# 
</code></pre></div>
<p>Luego, agrega al nuevo usuario al grupo "sudo" para otorgarle permisos de administrador:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>root@ip-172-31-42-159:~# usermod -aG sudo profe
</code></pre></div>
<p>Para confirmar que el usuario se ha agregado correctamente al grupo "sudo", puedes verificar el archivo /etc/group:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>root@ip-172-31-42-159:~# grep &#39;^sudo:&#39; /etc/group
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>sudo:x:27:admin,profe
</code></pre></div>
<p>Comprobamos cómo tanto <code>admin</code> como <code>profe</code> pertenecen ahora al grupo de sudoers.</p>
<p>Pero ahora todavía no podemos conectarnos a la máquina con el usuario profe, porque solo podemos conectarnos con par de claves y <code>profe</code> no las tiene. Vamos a generárselas.</p>
<h2 id="generacion-del-par-de-claves">Generación del par de claves.</h2>
<p>En primer lugar nos crearemos el par de claves para <code>profe</code>, pública y privada, <strong>desde del ordenador local o bien desde el terminal de Linux o desde PowerShell en Windows</strong>, utiliza el comando (<strong>sin sudo</strong>):</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>ssh-keygen -b 4096
</code></pre></div>
<p>Si no tenéis un par de claves creadas y dejáis las opciones por defecto, creará una clave privada <code>id_rsa</code> y una clave pública <code>id_rsa.pub</code> en el directorio <code>/home/nombreusuario/.ssh</code>. Compruébalo. Si ya tenéis un par de claves, os pedirá el nombre para ese nuevo par.</p>
<p>Os pedirá una contraseña para proteger el uso de la clave privada. Puesto que precisamente queremos agilizar el proceso de conexión por SSH para no introducir contraseñas, <strong>debéis dejarla vacía</strong>.</p>
<p>Si vas a generar y usar varias claves para distintas finalidades podría ser interesante asignarles nombres descriptivos según las mismas.</p>
<p>Una vez creado el par de claves, tal y como hemos visto en el apartado anterior, <em>el servidor SSH (Debian) debe poseer nuestra clave pública para que podamos autenticarnos con nuestra clave privada</em>, que como su nombre indica, sólo debemos poseer nosotros y por eso nos identifica unívocamente.</p>
<h3 id="copia-la-clave-publica-desde-el-ordenador-local-al-servidor-debian">Copia la clave pública desde el ordenador local al servidor Debian</h3>
<p>Este proceso de copia se puede realizar fácilmente con el comando <code>ssh-copy-id</code> si nuestro servidor aceptara login por contraseña. </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>$ ssh-copy-id usuario@ip_servidor
</code></pre></div>
<p>Pero como nuestro servidor solo acepta login por claves ssh, entonces deberemos hacerlo manualmente. Así entenderemos mejor lo que ocurre realmente. Sigue estos pasos:</p>
<p><strong>1. Desde el terminal local</strong></p>
<p>Copia la clave pública generada al portapapeles. Si tienes Windows, utiliza Notepad. Y si tienes Linux puedes utilizar este comando. </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>$ cat ~/.ssh/id_rsa.pub | pbcopy
</code></pre></div>
<p><strong>2. En el servidor remoto Debian</strong></p>
<p>Conéctate al servidor Debian como <code>admin</code>. Ya sabes cómo.</p>
<p>Cada usuario guarda las claves públicas en el archivo denominado <strong>~/.ssh/authorized_keys</strong>. Puedes ver la clave pública del usuario <code>admin</code> correspondiente a la clave privada con la que se conecta con:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>$ cat /home/admin/.ssh/authorized_keys
</code></pre></div>
<p>Pero ahora necesitamos crear una nueva clave pública para <code>profe</code>, así que desde el usuario <code>admin</code> cambiaremos al usuario <code>profe</code></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>admin@ip-172-31-42-159:~$ su profe
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>profe@ip-172-31-42-159:~$
</code></pre></div>
<p>Puede que te pida la contraseña de <code>profe</code> para ejecutar el comando anterior pero el usuario <code>profe</code> no tiene contraseña. Para desactivarlo seguiremos los siguientes pasos:</p>
<p>Cambia al usuario root y abre el archivo sudoers
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>admin@ip-172-31-42-159:~$ sudo su -
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>root@ip-172-31-42-159:~# sudo visudo
</code></pre></div></p>
<p>Añade la siguiente configuración debajo de la línea <code>%sudo ALL=(ALL:ALL) ALL</code>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>admin  ALL=NOPASSWD: /bin/su – profe
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>profe ALL=(ALL) NOPASSWD:ALL
</code></pre></div></p>
<p>Guarda y cierra el archivo. Ahora sal del modo root, y desde el usuario <code>admin</code>  cambia al usuario <code>profe</code> con el comando <code>sudo su - profe</code></p>
<p>Cambiaremos a la carpeta raiz de profe:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>profe@ip-172-31-42-159:~$ cd
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>profe@ip-172-31-42-159:~$ pwd
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>/home/profe
</code></pre></div>
<p>Ahora creamos la carpeta .ssh y creamos y editamos authorized_keys</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>profe@ip-172-31-42-159:~$ mkdir .ssh
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>profe@ip-172-31-42-159:~$ cd .ssh/
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>profe@ip-172-31-42-159:~/.ssh$ nano authorized_keys
</code></pre></div>
<p>Ahora pegamos el contenido del portapapeles que copiamos anteriormente con CTRL+U y cerramos guardando con CTRL+X.</p>
<p>Deberemos cambiar los permisos del fichero authorized_keys.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>profe@ip-172-31-42-159:~/.ssh$ chmod 600 ~/.ssh/authorized_keys
</code></pre></div>
<p>Reinicia el servicio SSH para aplicar los cambios:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>profe@ip-172-31-42-159:~/.ssh$ sudo service ssh restart 
</code></pre></div>
<h2 id="comprobacion-de-acceso-al-servidor-con-ese-nuevo-usuario">Comprobación de acceso al servidor con ese nuevo usuario</h2>
<p>Ahora ya podemos conectarnos <strong>desde nuestro equipo local</strong> a la máquina remota usando la clave privada que generamos para <code>profe</code>.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>$ ssh -i ~/.ssh/id_rsa profe@direccion-ip-publica-servidor-debian
</code></pre></div>
<blockquote>
<p><em>Lógicamente, ahora deberíamos proporcionarle al profesor la clave privada para que se pudiera conectarse al servidor. Lógicamente deberíamos hacerlo desde un entorno securizado para evitar que terceros pudieran capturarla. Sin embargo, este no sería el proceso habitual. Lo hemos hecho así para aprender el funcionamiento. Pero en un entorno real sería el profesor el que generaría el par de claves y facilitaría al alumno la clave pública. De esta forma el profesor mantendría su clave privada y podría acceder a la máquina del alumno sin haber expuesto en ningún momento su clave privada.</em></p>
</blockquote>
<div class="admonition note">
<p class="admonition-title">Para Windows</p>
<p>Este módulo está diseñado desde un cliente Linux conectándose al servidor Linux, por lo que el cliente SSH está integrado en el propio terminal. Para Windows existen multitud de alternativas como cliente SSH, desde utilizar el propio WSL2 (Windows Subsystem Linux) de forma similar a lo que aquí se describe, hasta utilizar cualquier otro de los <a href="https://www.redeszone.net/tutoriales/servidores/mejores-clientes-ssh-windows/" target="_blank">varios clientes disponibles</a></p>
<p>Por ejemplo, si utilizáis <a href="https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html" target="_blank">Putty</a>, deberéis seguir los pasos que detallan en <a href="https://www.hostinger.es/tutoriales/llaves-ssh" target="_blank">este tutorial</a> para configurar las claves.</p>
<p>En caso de utilizar otro cliente, buscad la forma de hacerlo pues diferirá en cada caso.</p>
</div>







  
  



  




                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Volver al principio
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.top", "toc.integrate", "search.highlight", "content.code.annotate", "content.code.copy"], "search": "../../assets/javascripts/workers/search.07f07601.min.js", "translations": {"clipboard.copied": "Copiado al portapapeles", "clipboard.copy": "Copiar al portapapeles", "search.result.more.one": "1 m\u00e1s en esta p\u00e1gina", "search.result.more.other": "# m\u00e1s en esta p\u00e1gina", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.term.missing": "Falta", "select.version": "Seleccionar versi\u00f3n"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.56dfad97.min.js"></script>
      
    
  </body>
</html>